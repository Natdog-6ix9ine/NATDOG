---
title: 创建算子
---

# 构建算子开发工程
## 根据`msopgen`与`op.json`创建算子开发标准工程
op.json示例
```json
[
    {
        "op": "AddCustom",
        "input_desc": [
            {
                "name": "x",
                "param_type": "required",
                "format": [
                    "ND",
                    "ND",
                    "ND"
                ],
                "type": [
                    "fp16",
                    "float",
                    "int32"
                ]
            },
            {
                "name": "y",
                "param_type": "required",
                "format": [
                    "ND",
                    "ND",
                    "ND"
                ],
                "type": [
                    "fp16",
                    "float",
                    "int32"
                ]
            }
        ],
        "output_desc": [
            {
                "name": "z",
                "param_type": "required",
                "format": [
                    "ND",
                    "ND",
                    "ND"
                ],
                "type": [
                    "fp16",
                    "float",
                    "int32"
                ]
            }
        ]
    }
]
```
命令行如下
```bash
msopgen gen -i softmax.json -c ai_core-Ascend310B -lan cpp -out .
```

`msopgen`:CANN,Python工具包中的一个生成算子的工具
`gen`:生成模式
`-i`:input json文件的路径，需要执行用户具有此路径的可读权限。
`-c`:--compute_unit 算子的计算单元，格式为`ai_core-{soc version}`,soc-version为Ascend310B，官方说是310B4但是测试过310B4用不了。
`-lan`:--language 算子编码语言，默认为python
`-out`:--output 输出的路径，一般就为.,当前文件夹生成一个算子名称的文件夹。
[更多参数参考官方文档](https://www.hiascend.com/document/detail/zh/canncommercial/80RC3/devaids/opdev/optool/atlasopdev_16_0018.html)

## 创建.run包

```bash
chmod +x build.sh
./build.sh
```